{{! views/admin/veiculos/veiculo.hbs }}
<main>
    <div class="p-5 mb-4 bg-light rounded-3">
        <div class="container-fluid py-5">
            <h2>Lista de Veículos</h2>
            <hr />
            {{!-- Adicionar em views/admin/veiculos/veiculo.hbs --}}
<form action="/rota_veiculos/veiculos" method="GET" class="mb-4">
    <div class="row">
        <div class="col-md-3">
            <input type="text" name="marca" class="form-control" placeholder="Filtrar por marca..." value="{{query.marca}}">
        </div>
        <div class="col-md-3">{{! views/admin/veiculos/veiculo.hbs }}
<main>
    <div class="container-fluid py-5">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="text-white">Lista de Veículos</h2>
            <a href="/rota_veiculos/veiculos/add" class="btn btn-orange">
                <i class="fas fa-plus-circle me-2"></i>Novo Veículo
            </a>
        </div>

        {{!-- Formulário de Filtro --}}
        <div class="card bg-dark-gray p-4 mb-4">
            <form action="/rota_veiculos/veiculos" method="GET">
                <div class="row g-3 align-items-end">
                    <div class="col-md-3">
                        <label for="marca" class="form-label text-white-50">Marca</label>
                        <input type="text" id="marca" name="marca" class="form-control" placeholder="Filtrar por marca..." value="{{query.marca}}">
                    </div>
                    <div class="col-md-3">
                        <label for="modelo" class="form-label text-white-50">Modelo</label>
                        <input type="text" id="modelo" name="modelo" class="form-control" placeholder="Filtrar por modelo..." value="{{query.modelo}}">
                    </div>
                    <div class="col-md-3">
                        <label for="disponibilidade" class="form-label text-white-50">Disponibilidade</label>
                        <select name="disponibilidade" id="disponibilidade" class="form-select">
                            <option value="">Todos</option>
                            <option value="true" {{#if (eq query.disponibilidade 'true')}}selected{{/if}}>Disponíveis</option>
                            <option value="false" {{#if (eq query.disponibilidade 'false')}}selected{{/if}}>Indisponíveis</option>
                        </select>
                    </div>
                    <div class="col-md-3 d-flex">
                        <button type="submit" class="btn btn-orange flex-grow-1 me-2">
                            <i class="fas fa-search me-2"></i>Buscar
                        </button>
                        <a href="/rota_veiculos/veiculos" class="btn btn-secondary flex-grow-1">
                             <i class="fas fa-eraser me-2"></i>Limpar
                        </a>
                    </div>
                </div>
            </form>
        </div>

        {{!-- Grid de Cards de Veículos --}}
        <div class="row">
            {{#each veiculos}}
            <div class="col-md-6 col-lg-4 mb-4">
                <div class="card vehicle-card h-100">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="card-title mb-0">{{marca}} {{modelo}}</h5>
                        <span class="badge bg-light text-dark">{{ano}}</span>
                    </div>
                    <div class="card-body">
                        <p class="card-text"><strong>Nome:</strong> {{nome}}</p>
                        <p class="card-text"><strong>Placa:</strong> <span class="badge bg-dark">{{placa}}</span></p>
                        <p class="card-text"><strong>Matrícula:</strong> {{matricula}}</p>
                        <p class="card-text"><strong>Cliente:</strong> {{#if cliente.nome}}{{cliente.nome}}{{else}}Sem cliente associado{{/if}}</p>
                    </div>
                    <div class="card-footer d-flex justify-content-end">
                        <a href="/rota_veiculos/editar_veiculo/{{id_veiculo}}" class="btn btn-outline-light btn-sm me-2">
                            <i class="fas fa-pencil-alt me-1"></i>Editar
                        </a>
                        <a href="/rota_veiculos/deletar_veiculo/{{id_veiculo}}" class="btn btn-outline-danger btn-sm">
                            <i class="fas fa-trash-alt me-1"></i>Deletar
                        </a>
                    </div>
                </div>
            </div>
            {{else}}
                <div class="col-12">
                    <div class="alert alert-warning text-center" role="alert">
                        Nenhum veículo encontrado.
                    </div>
                </div>
            {{/each}}
        </div>
    </div>
</main>
            <input type="text" name="modelo" class="form-control" placeholder="Filtrar por modelo..." value="{{query.modelo}}">
        </div>
        <div class="col-md-3">
            <select name="disponibilidade" class="form-control">
                <option value="">Todos</option>
                <option value="true" {{#if (eq query.disponibilidade 'true')}}selected{{/if}}>Disponíveis</option>
                <option value="false" {{#if (eq query.disponibilidade 'false')}}selected{{/if}}>Indisponíveis</option>
            </select>
        </div>
        <div class="col-md-3">
            <button type="submit" class="btn btn-primary">Buscar</button>
            <a href="/rota_veiculos/veiculos" class="btn btn-secondary">Limpar</a>
        </div>
    </div>
</form>
            <a href="/rota_veiculos/veiculos/add">
                <button class="btn btn-success">Novo Veículo</button>
            </a>
            {{#each veiculos}}
                <div class="card mt-4">
                    <div class="card-body">
                        <h4><b>ID: </b>{{id_veiculo}}
                            |
                            <b>Nome:</b>
                            {{nome}}</h4>
                        <small><b>Matrícula: </b> {{matricula}} </small><br />
                        <small><b>Marca: </b>
                            {{marca}}
                            |
                            <b>Modelo:</b>
                            {{modelo}}
                            |
                            <b>Ano:</b>
                            {{ano}}
                        </small><br />
                        <small><b>Placa: </b> {{placa}} </small><br />
                        <small><b>Cliente: </b> {{cliente.nome}} </small><br />

                        <a href="/rota_veiculos/editar_veiculos/{{id_veiculo}}">
                            <button class="btn btn-primary mt-3">Editar</button>
                        </a>

                        <a href="/rota_veiculos/deletar_veiculos/{{id_veiculo}}">
                            <button class="btn btn-danger mt-3">Deletar</button>
                        </a>
                    </div>
                </div>
            {{/each}}
        </div>
    </div>
</main>